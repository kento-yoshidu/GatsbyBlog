---
title: "éžåŒæœŸå‡¦ç†ã«ã¤ã„ã¦å­¦ã¶"
postdate: "2099-01-01"
update: "2099-01-01"
seriesName: "JavaScriptã®éžåŒæœŸå‡¦ç†ã‚’ç†è§£ã™ã‚‹"
seriesSlug: "JavaScript Asynchronous processing"
description: ""
tags: ["JavaScript", "éžåŒæœŸå‡¦ç†"]
---

# JavaScriptã®éžåŒæœŸå‡¦ç†ã‚’å­¦ã¶

JavaScriptã®å­¦ç¿’è€…ã‚’æ‚©ã¾ã›ã‚‹é¬¼é–€ã¨ã—ã¦**éžåŒæœŸå‡¦ç†**ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ï¼ˆJavaScriptã«ãŠã„ã¦ã¯æœ€é›£é–¢ã®è¦ç´ ã ã¨æ€ã£ã¦ã„ã¾ã™ï¼‰ã€‚

ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€`Promise`ã€`async/await`ã‚’ä¸€é€šã‚Šå‹‰å¼·ã™ã‚Œã°æ›¸ã‘ãªã„ã“ã¨ã‚‚ãªã„ã®ã§ã™ãŒã€ãã®è£å´ã®ä»•çµ„ã¿ã¾ã§çŸ¥ã‚ã†ã¨ã™ã‚‹ã¨ã‹ãªã‚Šå¤§å¤‰ã§ã™ã€‚æ™®é€šã®å…¥é–€æ›¸ã§ã¯ãã®è¾ºã¾ã§æ‰±ã£ã¦ã„ã¾ã›ã‚“ã€‚

å®Ÿéš›ã€éžåŒæœŸå‡¦ç†ã®ä»•çµ„ã¿ã€ç†è§£ã¯ã‹ãªã‚Šé›£ã—ãã€ç§è‡ªèº«ã‚‚ã€Œç†è§£ã§ããŸã§ï¼ã€â†’ã€Œåˆ†ã‹ã£ã¦ãªã‹ã£ãŸã‚ã€ã€ã€ã€ã¨ã„ã†ã‚µã‚¤ã‚¯ãƒ«ã‚’ä½•åº¦ã‚‚ä½•åº¦ã‚‚ç¹°ã‚Šè¿”ã—ãŸã®ã¡ã€ã€Œä¸€å¿œåˆ†ã‹ã£ãŸã‚ðŸ™„ã€ã¨ã„ã†æ‰€ã¾ã§æ¥ã¾ã—ãŸã€‚

ãã—ã¦éžåŒæœŸå‡¦ç†ã«é–¢ã—ã¦ã¯è¨˜è¿°é‡ãŒè†¨å¤§ãªãŸã‚ã€ã€ŒJavaScriptä¸­ç´šè€…ã‚’ç›®æŒ‡ã™ã€ã‹ã‚‰é£›ã³å‡ºã—ã€ã€ŒJavaScriptã®éžåŒæœŸå‡¦ç†ã‚’ç†è§£ã™ã‚‹ã€ã¨ã„ã†ã‚·ãƒªãƒ¼ã‚ºã«ã¾ã¨ã‚ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚


ä»Šå›žã¯ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã€Promiseã€async/awaitã¨ã„ã†3ã¤ã®æ§‹æ–‡ã‚’ã–ã£ã¨çœºã‚ã¦ã„ãã¾ã™ã€‚

## ä¸Šã‹ã‚‰é †ç•ªã«å‡¦ç†ã—ã¦ãã‚Œãªã„

åŒæœŸå‡¦ç†ã¯**ã‚³ãƒ¼ãƒ‰ã‚’é †ç•ªã«å‡¦ç†ã—ã¦ã„ãã¾ã™**ã€‚ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡ŒãŒé–‹å§‹ã•ã‚Œã‚Œã°ã€ãã®å®Ÿè¡ŒãŒçµ‚ã‚ã‚‹ã¾ã§ã¯æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã®å‡¦ç†ã¯å§‹ã¾ã‚Šã¾ã›ã‚“ã€‚

ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯åŒæœŸå‡¦ç†ã®ä¾‹ã§ã™ã€‚

```javascript
consoel.log(1);
consoel.log(2);
consoel.log(3);
```

ä½•ã®å¤‰å“²ã‚‚ãªã„ã‚³ãƒ¼ãƒ‰ã§ã™ãŒã€ã“ã‚ŒãŒåŒæœŸå‡¦ç†ã®ä¾‹ã§ã™ã€‚å‡ºåŠ›çµæžœã¯ã€ã€ã€åˆ†ã‹ã‚Šã¾ã™ã­ï¼Ÿ

```console
1
2
3
```

ä¸Šã«æ›¸ã„ãŸã‚‚ã®ã‹ã‚‰é †ç•ªã«å‡¦ç†ã•ã‚Œã¦ã„ãã¾ã™ã€‚

æ¬¡ã«éžåŒæœŸå‡¦ç†ã®ä¾‹ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚æã‚‰ãéžåŒæœŸå‡¦ç†ã«ã¤ã„ã¦èª¿ã¹ãŸã“ã¨ã®ã‚ã‚‹äººãªã‚‰1000å›žãã‚‰ã„ç›®æ’ƒã—ã¦ã„ã‚‹ä¾‹ã§ã™ï¼ˆè¦‹é£½ããŸã¨ã‹è¨€ã‚ãªã„ã§ãã ã•ã„ï¼‰ã€‚

```javascript
setTimeout(() => {
  console.log(1)
}, 1000)

setTimeout(() => {
  console.log(2)
}, 1000)

setTimeout(() => {
  console.log(3)
}, 1000)
```

ã‚„ã‚ŠãŸã„ã“ã¨ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

1. 1ç§’å¾Œã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«`1`ã‚’å‡ºåŠ›ã™ã‚‹
2. `1`ãŒå‡ºåŠ›ã•ã‚Œã¦ã‹ã‚‰1ç§’å¾Œã€`2`ã‚’å‡ºåŠ›ã™ã‚‹
3. `2`ãŒå‡ºåŠ›ã•ã‚Œã¦ã‹ã‚‰1ç§’å¾Œã€`3`ã‚’å‡ºåŠ›ã™ã‚‹

ã“ã“ã§`setTimeout()`ã«ã¤ã„ã¦ç°¡å˜ã«ãŠã•ã‚‰ã„ã—ã¾ã™ã€‚

ç¬¬1å¼•æ•°ã«ã¯ã€ã‚¿ã‚¤ãƒžãƒ¼ãŒå®Œäº†ã—ãŸå¾Œã«å®Ÿè¡Œã—ãŸã„é–¢æ•°ã‚’æ¸¡ã—ã¾ã™ã€‚ã“ã“ã§ã¯`console.log(1)`ã‚’å®Ÿè¡Œã™ã‚‹ç„¡åé–¢æ•°ã‚’æ¸¡ã—ã¦ã„ã¾ã™ã€‚ãã—ã¦ç¬¬2å¼•æ•°ã§æ•°å€¤ï¼ˆãƒŸãƒªç§’ï¼‰ã‚’æ¸¡ã—ã€ã‚¿ã‚¤ãƒžãƒ¼ã®æ™‚é–“ã‚’è¨­å®šã—ã¾ã™ã€‚ã“ã“ã§ã¯`1000`ã‚’æ¸¡ã—ã¦ã„ã‚‹ã®ã§ã€ã‚¿ã‚¤ãƒžãƒ¼ã¯1ç§’ã¨ã„ã†äº‹ã«ãªã‚Šã¾ã™ã€‚

ã§ã€ä¸Šè¨˜ã§ç´¹ä»‹ã—ãŸã‚³ãƒ¼ãƒ‰ãŒå®Ÿéš›ã«ã©ã†ã„ã†å‹•ãã‚’ã™ã‚‹ã‹ã¨ã„ã†ã¨ã€ã€ã€

```javascript
// ç´„1ç§’çµŒã£ã¦ã‹ã‚‰ã€1, 2, 3ãŒä¸€æ°—ã«å‡ºåŠ›ã•ã‚Œã‚‹
1
2
3
```

ã“ã®ã‚ˆã†ã«ã€æ„å›³ã—ãŸé€šã‚Šã«ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã•ã‚Œã¾ã›ã‚“ã€‚å®Ÿè¡Œã—ã¦ç´„1ç§’å¾Œã«`1`ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã®ã¯ç‹™ã„é€šã‚Šã§ã™ãŒã€ç›´å¾Œã«`2`ã¨`3`ãŒå‡ºåŠ›ã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚

è©³ã—ã„ã“ã¨ã¯æ¬¡å›žä»¥é™ã«èª¬æ˜Žã—ã¾ã™ãŒã€ã“ã‚Œã¯`setTimeout()`ãŒ**éžåŒæœŸAPI**ã§ã‚ã‚‹ãŸã‚ã§ã™ã€‚

JavaScriptã§ã¯ã€æ™‚é–“ã®ã‹ã‹ã‚‹å‡¦ç†ã‚’è‡ªåˆ†ã§å‡¦ç†ã›ãšã€**Web API**ã¨ã„ã†APIã«æŠ•ã’ã¾ã™ï¼ˆ`setTimeout`ã‚‚Web APIã§ã™ï¼‰ã€‚ã“ã‚Œã¯ECMAScriptã®æ©Ÿèƒ½ã§ã¯ãªãã€JavaScriptã®å®Ÿè¡Œç’°å¢ƒï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ãªã©ï¼‰ãŒæä¾›ã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚

ä»Šå›žã®ä¾‹ã§è¨€ã†ã¨ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒå®Ÿè¡Œã•ã‚ŒãŸå¾Œã€å³åº§ã«`setTimeout(() => console.log(1), 1000)`ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ãã—ã¦ã“ã®é–¢æ•°ã¯Web APIã«æŠ•ã’ã‚‰ã‚Œã€WebAPIå´ã§ã‚¿ã‚¤ãƒžãƒ¼ãŒã‚¹ã‚¿ãƒ¼ãƒˆã—æ™‚é–“ã‚’è¨ˆæ¸¬ã—ã¾ã™ã€‚

![](./image/image01.png)

æœ€åˆã®é–¢æ•°ã‚’Web APIã«æŠ•ã’ãŸå¾Œã€å³åº§ã«`setTimeout(() => console.log(2), 1000)`ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ã€Œæ™‚é–“ã®ã‹ã‹ã‚‹ã‚„ã¤ã¯ä»–ã«æŠ•ã’ã¦ã€å…ˆã«é€²ã‚€ã‚ˆãƒ¼ã€ã¨ã„ã†ã“ã¨ã§ã™ã€‚

## ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°

ã§ã¯ç‹™ã„é€šã‚Šã«å‡ºåŠ›ã™ã‚‹ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãæ›ãˆã¦ã¿ã¾ã™ã€‚`setTimeout()`ã®ä¸­ã§`setTimeout()`ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚ã„ã‚ã‚†ã‚‹ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¨ã„ã†ã‚„ã¤ã§ã™ã­ã€‚ã€Œã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã€ã¯ã€ã€Œé–¢æ•°ã«æ¸¡ã™é–¢æ•°ã€ã‚’æŒ‡ã—ã¾ã™ã€‚

```js
setTimeout(() => {
  console.log(1)

  setTimeout(() => {
    console.log(2)

    setTimeout(() => {
      console.log(3)}
    , 1000)}
  , 1000)}
, 1000);
```

https://qiita.com/nuko-suke/items/5b16ab9de402547c5797

https://www.mitrais.com/news-updates/asynchronous-in-javascript/

https://towardsdev.com/event-loop-in-javascript-672c07618dc9

https://zenn.dev/redpanda/articles/ef719c7e592327
