---
title: "#2 åˆ—æŒ™å‹ã¨ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ"
postdate: "2023-10-08"
update: "2023-10-08"
seriesName: "ã‚†ã£ãã‚Šå­¦ã¶Rust"
seriesSlug: "LearnSlowlyRust"
description: "Rustã®åˆ—æŒ™å‹ã¨ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã«ã¤ã„ã¦å­¦ã³ã¾ã™ã€‚"
tags: ["Rust", "åˆ—æŒ™å‹"]
keywords: ["Rust", "åˆ—æŒ™å‹", "enum"]
published: false
---

# åˆ—æŒ™å‹ã¨ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ

Rustã«ãŠã„ã¦**åˆ—æŒ™å‹**ã¯ã€**ã‚ã‚‰ã‹ã˜ã‚åˆ—æŒ™ã•ã‚ŒãŸå€¤ã®ã¿ã‚’ã¨ã‚Œã‚‹**ã“ã¨ã‚’è¡¨ã™å‹ã®ä¸€ç¨®ã§ã™ã€‚Rustã®ç‰¹å¾´çš„ãªå‹ã§ã‚ã‚‹Optionå‹ã¨Resultå‹ã®ç†è§£ã®ãŸã‚ã«ã¯ã€ã¾ãšåˆ—æŒ™å‹ã‚’ç†è§£ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ã“ã®è¨˜äº‹ã§åˆ—æŒ™å‹ã‚’ç´¹ä»‹ã—ã¦ä»¥é™ã®è¨˜äº‹ã§Optionå‹ã‚„Resultå‹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

ã¾ãŸã€åˆ—æŒ™å‹ã¯matchå¼ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ãã®åŠ›ã‚’ç™ºæ®ã—ã¾ã™ã€‚ã¾ãŸã€matchå¼ã®ç†è§£ã®ãŸã‚ã«ã¯ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã®è€ƒãˆæ–¹ã‚‚å­¦ã°ãªã‘ã‚Œã°ã„ã‘ã¾ã›ã‚“ã€‚ã•ã‚‰ã«ã€ãã®ç™ºå±•å½¢ã¨ã—ã¦`if-let`ã¨`let-else`ã‚‚å­¦ç¿’ã—ã¾ã™ã€‚

## ã¨ã‚Šå¾—ã‚‹å€¤ã ã‘ã‚’ã€Œåˆ—æŒ™ã€ã™ã‚‹

ä¾‹ãˆã°ã€æ–¹è§’ã‚’è¡¨ã™å¤‰æ•°ã‚’ç”¨æ„ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚å¤‰æ•°ã«ã¯`West`ã€`South`ã€`East`ã€`North`ï¼ˆæ±å—è¥¿åŒ—ï¼‰ã®ã„ãšã‚Œã‹ã—ã‹å…¥ã£ã¦ã»ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã‚“ãªæ™‚ã¯`enum`ã‚’ä½¿ã£ã¦`Direction`åˆ—æŒ™å‹ã‚’å®šç¾©ã—ã¾ã™ã€‚

```rust
// Directionåˆ—æŒ™å‹ã®å®šç¾©
#[derive(Debug)]
#[allow(unused)]
enum Direction {
    West,
    South,
    East,
    North
}
```

ã“ã®æ™‚ã€`West`ã€`South`ã€`East`ã€`North`ã¨ã„ã£ãŸåˆ—æŒ™ä½“ãŒã¨ã‚Šå¾—ã‚‹å€¤ã¯ã€**åˆ—æŒ™å­ï¼ˆVariantï¼‰** ã¨å‘¼ã°ã‚Œã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦`Direction`åˆ—æŒ™å‹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚

```rust
#[derive(Debug)]
#[allow(unused)]
enum Direction {
    West,
    South,
    East,
    North,
}

fn main() {
    let direction = Direction::North;

    println!("{:?}", direction);
    //=> North
}
```

æƒ³åƒã«å®¹æ˜“ã„ã¨æ€ã„ã¾ã™ãŒã€`Direction`åˆ—æŒ™ä½“ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯å®šç¾©ã•ã‚ŒãŸåˆ—æŒ™ä½“ä»¥å¤–ã®å€¤ã‚’ã¨ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ï¼ˆä»¥ä¸‹ã€`Direction`åˆ—æŒ™ä½“ã‚’å®šç¾©ã—ã¦ã„ã‚‹ç®‡æ‰€ã¯çœç•¥ã—ã¾ã™ï¼‰ã€‚

```rust
fn main() {
    // NorthEastï¼ˆåŒ—è¥¿ï¼‰ãªã‚“ã¦æ–¹è§’ã¯ã¨ã‚Œãªã„
	let directon = Direction::NorthEast;
    /*
        error[E0599]: no variant or associated item named `NorthEast` found for enum `Direction` in the current scope
        --> src/main.rs:11:28
        |
    3   | enum Direction {
        | -------------- variant or associated item `NorthEast` not found for this enum
    ...
    11  |     let directon = Direction::NorthEast;
        |                               ^^^^^^^^^ variant or associated item not found in `Direction`
        }
    */
}
```

### matchå¼ã¨çµ„ã¿åˆã‚ã›ã‚‹

ã“ã‚Œã ã‘ã§ã¯åˆ—æŒ™ä½“ã®ãƒ¡ãƒªãƒƒãƒˆã¯ã‚ã¾ã‚Šãªã„ã‚ˆã†ã«æ„Ÿã˜ã‚‹ã¨æ€ã„ã¾ã™ãŒã€åˆ—æŒ™ä½“ã¯matchå¼ã¨çµ„ã¿åˆã‚ã›ã¦ã“ãåŠ›ã‚’ç™ºæ®ã—ã¾ã™ã€‚`Direction`åˆ—æŒ™ä½“ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒã©ã®åˆ—æŒ™å­ã§ã‚ã‚‹ã‹ã§å‡¦ç†ã‚’åˆ†å²ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```rust
fn main() {
    let direction = Direction::North;

    match direction {
        Direction::West => {
            println!("æ±ã«é€²ã‚€");
        },
        Direction::South => {
            println!("å—ã«é€²ã‚€");
        },
        Direction::East => {
            println!("è¥¿ã«é€²ã‚€");
        },
        Direction::North => {
            println!("åŒ—ã«é€²ã‚€");
        }
    }
    //=> åŒ—ã«é€²ã‚€
}
```

ã“ã®ã‚ˆã†ã«ã€ã©ã®åˆ—æŒ™ä½“ã¨ä¸€è‡´ã™ã‚‹ã‹ã€è¨€ã„æ›ãˆã‚‹ã¨**ãƒãƒƒãƒã™ã‚‹ã‹**ã‚’èª¿ã¹ã¦æ¡ä»¶åˆ†å²ã•ã‚Œã‚‹æ§‹æ–‡ãŒmatchå¼ã§ã™ï¼ˆãã®åã®é€šã‚Šã§ã™ã­ï¼‰ã€‚

matchå¼ã¨ã®çµ„ã¿åˆã‚ã›ã§å¼·åŠ›ãªæ‰€ã¯ã€**å…¨ã¦ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆåˆ—æŒ™å­ï¼‰ã‚’ç¶²ç¾…ã™ã‚‹ã“ã¨ãŒå¼·åˆ¶ã•ã‚Œã‚‹**ã“ã¨ã§ã™ã€‚ä¾‹ãˆã°`West`ã®å ´åˆã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å‰Šé™¤ã—ã¦ã¿ã‚‹ã¨ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã«å¤±æ•—ã—ã¾ã™ã€‚`Direction::West`ãŒã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ãªã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºåŠ›ã•ã‚Œã¦ã„ã¾ã™ã­ã€‚

```rust
fn main() {
    let direction = Direction::North;

    match direction {
        /*
        Direction::West => {
            println!("æ±ã«é€²ã‚€");
        },
        */
        Direction::South => {
            println!("å—ã«é€²ã‚€");
        },
        Direction::East => {
            println!("è¥¿ã«é€²ã‚€");
        },
        Direction::North => {
            println!("åŒ—ã«é€²ã‚€");
        },
    }
    /*
        error[E0004]: non-exhaustive patterns: `Direction::West` not covered
        --> src/main.rs:13:11
        |
        13 |     match direction {
        |           ^^^^^^^^^ pattern `Direction::West` not covered
        |
    */
}
```

ãªãŠã€matchå¼ã¯ï¼ˆãã®åã®é€šã‚Šï¼‰ã€Œå¼ã€ãªã®ã§ã€å€¤ã‚’è¿”ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

```rust
fn main() {
	let direction = Direction::North;

    // msgã¯&strå‹
	let msg = match direction {
        Direction::West => {
            "æ±ã«é€²ã‚€"
        },
        Direction::South => {
            "å—ã«é€²ã‚€"
        },
        Direction::East => {
            "è¥¿ã«é€²ã‚€"
        },
        Direction::North => {
            "åŒ—ã«é€²ã‚€"
        },
    };

	println!("{}", msg);
    //=> åŒ—ã«é€²ã‚€
}
```

### å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚‹

é–¢æ•°ã®å¼•æ•°ã«åˆ—æŒ™å‹ã‚’æŒ‡å®šã™ã‚‹å ´åˆã‚’è€ƒãˆã¦ã¿ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦å¼•æ•°ãŒ`Direction`åˆ—æŒ™å‹ã®åˆ—æŒ™å­ã§ã‚ã‚‹ã“ã¨ã‚’æŒ‡å®šã—ã¾ã™ã€‚ãã—ã¦matchå¼ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€å¼•æ•°ãŒ`Direction`åˆ—æŒ™å‹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚Šã€ã‹ã¤ã€å…¨ã¦ã®åˆ—æŒ™å­ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ã‚«ãƒãƒ¼ã—ã¦ã„ã‚‹é–¢æ•°ã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```rust
fn check_directon(direction: Direction) {
    let msg = match direction {
        Direction::West => {
            "æ±ã«é€²ã‚€"
        },
        Direction::South => {
            "å—ã«é€²ã‚€"
        },
        Direction::East => {
            "è¥¿ã«é€²ã‚€"
        },
        Direction::North => {
            "åŒ—ã«é€²ã‚€"
        }
    };

	println!("{}", msg);
    //=> åŒ—ã«é€²ã‚€
}

fn main() {
    check_directon(Direction::North);
}
```

### æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ã«å«ã¾ã‚Œã‚‹åˆ—æŒ™å‹

æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ã«ã‚‚ã„ãã¤ã‹ã®åˆ—æŒ™å‹ãŒã‚ã‚‰ã‹ã˜ã‚å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã“ã§ã¯`Ordering`åˆ—æŒ™å‹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚`Ordering`åˆ—æŒ™å‹ã¯2ã¤ã®æ•°å€¤ã‚’æ¯”ã¹ã€ã©ã¡ã‚‰ã‹ãŒå¤§ãã„(`Greater`)ã€å°ã•ã„(`Less`)ã€ã¾ãŸã¯ç­‰ã—ã„(`Equal`)ã¨ã„ã†3ã¤ã®åˆ—æŒ™å­ã‚’æŒã¡ã¾ã™ã€‚

ä»¥ä¸‹ã®ä¾‹ã¯2ã¤ã®`i32`ã‚’å—ã‘å–ã‚Šã€`Ordering`åˆ—æŒ™å‹ã®ã„ãšã‚Œã‹ã®åˆ—æŒ™å­ã‚’è¿”ã™é–¢æ•°ã§ã™ã€‚

```rust
use std::cmp::Ordering::{self, *};

fn compare(n: i32, m: i32) -> Ordering {
    if n < m {
        Less
    } else if n > m {
        Greater
    } else {
        Equal
    }
}
```

å‚è€ƒ : [ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°Rust ç¬¬2ç‰ˆ](https://www.oreilly.co.jp/books/9784873119786/)

ã“ã‚Œã‚’å‘¼ã³å‡ºã™ã«ã¯matchå¼ã‚’ä½¿ã„ã¾ã—ã‚‡ã†ã€‚`compare`ã‹ã‚‰ã¯`Ordering`åˆ—æŒ™å‹ã®åˆ—æŒ™å­ãŒè¿”ã£ã¦ãã‚‹ã‚ã‘ã§ã™ã‹ã‚‰ã€`Less`ã€`Greater`ã€`Equal`ã¨ã„ã†å…¨ã¦ã®åˆ—æŒ™å­ã‚’ç¶²ç¾…ã—ã¾ã—ã‚‡ã†ã€ã¨ã„ã†ã‹ç¶²ç¾…ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

```rust
fn main() {
    let n = 10;
    let m = 1;

    match compare(n, m) {
        Less => println!("{}ã®æ–¹ãŒ{}ã‚ˆã‚Šå°ã•ã„", n, m),
        Greater => println!("{}ã®æ–¹ãŒ{}ã‚ˆã‚Šå¤§ãã„", n, m),
        Equal => println!("{}ã¨{}ã¯ç­‰ã—ã„", n, m)
    }
    //=> 10ã®æ–¹ãŒ1ã‚ˆã‚Šå¤§ãã„
}
```

### åˆ—æŒ™å­ã¯å€¤ã‚’æŒã¦ã‚‹

å„åˆ—æŒ™å­ã¯å€¤ã‚’æŒã¤ã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãšã¯å„åˆ—æŒ™å­ãŒã©ã®ã‚ˆã†ãªå‹ã®å€¤ã‚’æŒã¤ã‹ã‚’å®šç¾©ã—ã¾ã™ã€‚

```rust
#[derive(Debug)]
#[allow(unused)]
enum Direction {
    West(usize),
    South(usize),
    East(usize),
    North(usize),
}
```

æ¬¡ã«`()`ã§å€¤ã‚’æ¸¡ã—ã€å€¤ã‚’æŒã£ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

```rust
fn main() {
    let direction = Direction::North(10);
}
```

`check_direction`é–¢æ•°ã«ãŠã„ã¦ã¯ã€å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’`Direction::West(å¤‰æ•°)`ã®ã‚ˆã†ã«ã™ã‚Œã°ã€åˆ—æŒ™å­ã®å€¤ã‚’å¤‰æ•°ã«æŸç¸›ã§ãã¾ã™ã€‚

```rust
fn check_directon(direction: Direction) {
    match direction {
        Direction::West(distance) => {
            println!("æ±ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã‚€", distance);
        },
        Direction::South(distance) => {
            println!("å—ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã‚€", distance);
        },
        Direction::East(distance) => {
            println!("è¥¿ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã‚€", distance);
        },
        Direction::North(distance) => {
            println!("åŒ—ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã‚€", distance);
        },
    }
}

fn main() {
    let direction = Direction::North(10);

    check_directon(direction);
    //=> åŒ—ã«10ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã‚€
}
```

ãªãŠã€åˆ—æŒ™å­ãŒæŒã¤å€¤ã«ã©ã†ã«ã‹ã—ã¦ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚ˆã†ã¨ã—ã¦ã‚‚ã§ãã¾ã›ã‚“ã€‚matchå¼ã‚„å¾Œè¿°ã™ã‚‹if-letæ§‹æ–‡ãªã©ã‚’ä½¿ç”¨ã™ã‚‹ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```rust
fn main() {
    let direction = Direction::North(10);

    // ğŸ¦€âŒ ã“ã‚“ãªã“ã¨ã¯ã§ããªã„
    // println!("{}", direction.distnce);
    // println!("{}", direction[distance]);
}
```

---

åˆ—æŒ™å­ã¯ãã‚Œãã‚Œç•°ãªã‚‹å‹ã®å€¤ã‚’æŒã¤ã“ã¨ãŒã§ãã¾ã™ã€‚ã•ã‚‰ã«ã€`usize`ãªã©ã®ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ãªå‹ã ã‘ã§ã¯ãªãã€æ§‹é€ ä½“ãªã©ã‚‚å€¤ã¨ã—ã¦æŒã¤ã“ã¨ãŒã§ãã¾ã™ã€‚

`Direction`åˆ—æŒ™å‹ã«æ–°ãŸã«`NorthEast`åˆ—æŒ™å­ã‚’è¿½åŠ ã—ã¾ã™ã€‚ãã®åã®é€šã‚Šã€åŒ—è¥¿ã‚’è¡¨ç¾ã™ã‚‹åˆ—æŒ™å­ã§ã™ã€‚å€¤ã¯`north`ã€`east`ã¨ã„ã†ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŒã¤ç„¡åæ§‹é€ ä½“ã§ã™ã€‚

```rust
#[allow(unused)]
#[derive(Debug)]
enum Direction {
	West(usize),
	South(usize),
	East(usize),
	North(usize),
	NorthEast { north: usize, east: usize },
}

fn main() {
    let direction = Direction::NorthEast {
        north: 10,
        east: 20
    };
}
```

`check_direction`é–¢æ•°ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¦`NorthEast`ã¨ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã•ã›ã¾ã—ã‚‡ã†ã€‚

```rust
fn check_directon(direction: &Direction) {
    match direction {
        Direction::West(distance) => {
            println!("æ±ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã‚€", distance);
        },
        Direction::South(distance) => {
            println!("å—ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã‚€", distance);
        },
        Direction::East(distance) => {
            println!("è¥¿ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã‚€", distance);
        },
        Direction::North(distance) => {
            println!("åŒ—ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã‚€", distance);
        },
        Direction::NorthEast { north: n, east: e } => {
          println!("åŒ—ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«ã€è¥¿ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã‚€", n, e);
        }
    }
}

fn main() {
	let direction = Direction::NorthEast {
		north: 10,
		east: 20
	};

	check_directon(&direction);
}
```

ã“ã“ã¾ã§è¦‹ã¦ããŸã‚ˆã†ã«ã€åˆ—æŒ™å‹ã‚’æ‰±ã†ã«ã¯`match`ã‚‚ã‚»ãƒƒãƒˆã§ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆ`match`ä»¥å¤–ã®é¸æŠè‚¢ã‚‚ã‚ã‚Šã¾ã™ãŒã€ã“ã®å¾Œã™ãç™»å ´ã—ã¾ã™ï¼‰ã€‚ã“ã®åˆ—æŒ™å‹ã®ä»•çµ„ã¿ã¯ã€ç§ãŸã¡ã«ä¸ä¾¿ã•ã‚„åˆ¶é™ã‚’èª²ã—ã€å …ç‰¢ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‹ã›ã¦ãã‚Œã‚‹ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«ã®ã‚ˆã†ãªã‚‚ã®ã ã¨è¨€ãˆã¾ã™ã€‚

## ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ

ã•ã¦ã€ã“ã®è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«ã«ã‚‚ã‚ã‚‹**ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ**ã¨ã¯ã©ã†ã„ã†æ„å‘³ãªã®ã§ã—ã‚‡ã†ã‹ï¼Ÿã¾ãŸã€åˆ—æŒ™å‹ã¨ã©ã®ã‚ˆã†ã«é–¢ä¿‚ã—ã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿã“ã“ã¾ã§èª­ã‚“ã§ã„ãŸã ã„ãŸãªã‚‰æƒ³åƒã«ãŸã‚„ã™ã„ã¨æ€ã„ã¾ã™ãŒã€ã€Œã‚ã‚‹å€¤ãŒã‚ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¯¾ã—ã¦ãƒãƒƒãƒã™ã‚‹ã‹ã€ã‚’æ¤œæŸ»ã™ã‚‹æ§‹æ–‡ã®ã‚ˆã†ãªã‚‚ã®ã ã¨è¨€ãˆã¾ã™ã€‚ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã¨ã„ã†è¨€è‘‰ã«ã¤ã„ã¦ã€ã‚‚ã†å°‘ã—æ˜ã‚Šä¸‹ã’ã¦è€ƒãˆã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚

ä¾‹ãˆã°ã€`let x = y;`ã¨ã„ã†æ§‹æ–‡ã«æ³¨ç›®ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã¯å€¤`y`ã‚’å¤‰æ•°`x`ã«æŸç¸›ã—ã¦ã„ã‚‹ã€ï¼ˆæœ¬å½“ã«ï¼‰è¦ªã®é¡”ã‚ˆã‚Šè¦‹ã¦ã„ã‚‹ãŠé¦´æŸ“ã¿ã®æ§‹æ–‡ã§ã™ã­ã€‚ä¸€èˆ¬çš„ï¼ˆ?ï¼‰ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã ã¨ã€Œä»£å…¥ã€ã¨å‘¼ã°ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã¨æ€ã„ã¾ã™ãŒã€Rustã§ã¯**ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ**ã‚’è¡Œã£ã¦ã„ã‚‹ã¨è¨€ãˆã¾ã™ã€‚

ä»¥ä¸‹ã®å˜ç´”ãªã‚³ãƒ¼ãƒ‰ã‚’ä¾‹ã«ã¨ã‚Šã¾ã™ãŒã€ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã¨ã¯ã€Œå¼ã®å€¤`10`ãŒãƒ‘ã‚¿ãƒ¼ãƒ³`num`ã€ã«ä¸€è‡´ã™ã‚‹ã‹ã‚’åˆ¤å®šã™ã‚‹ä»•çµ„ã¿ã ã¨è¨€ãˆã¾ã™ã€‚

```rust
fn main() {
    let num = 10;
}
```

ã€Œã„ã‚„ã€ãã‚‰ä¸€è‡´ã™ã‚‹ã‚„ã‚ã€ã£ã¦æ€ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ä¸–ã®ä¸­ã«ã¯ã€Œå¿…ãšã—ã‚‚ä¸€è‡´ã™ã‚‹ã¨ã¯é™ã‚‰ãªã„ã€äº‹ã‚‚ã‚ã‚‹ã®ã§ã™ã€‚ã‚‚ã†ã¡ã‚‡ã£ã¨ä¾‹ã‚’è¦‹ã¦ã¾ã—ã‚‡ã†ã€‚

---

ãŠã•ã‚‰ã„ã—ã¾ã™ã€‚è¦ªã®é¡”ã‚ˆã‚Šè¦‹ãŸã€å¤‰æ•°ã«å€¤ã‚’æŸç¸›ã™ã‚‹æ§‹æ–‡ã‚’ä¸€èˆ¬åŒ–ã—ã€`let PATTERN = EXPRESSION`ã¨è¡¨ç¾ã—ã¾ã™ã€‚å³ã‚ªãƒšãƒ©ãƒ³ãƒ‰ã®å¼ãŒå·¦ã‚ªãƒšãƒ©ãƒ³ãƒ‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ãƒãƒƒãƒã™ã‚‹ã‹ï¼Ÿã¨ã„ã†æ§‹æ–‡ã§ã™ã­ã€‚ã“ã®è¦‹æ–¹ã‚’å…ƒã«ãƒãƒƒãƒã™ã‚‹å ´åˆã€ãƒãƒƒãƒã—ãªã„å ´åˆã‚’è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

ã¾ãšã¯ãƒãƒƒãƒã™ã‚‹å ´åˆã‹ã‚‰ã§ã™ãŒã€å¤§æŠµã®å ´åˆãŒãƒãƒƒãƒã—ã¾ã™ã€‚ä¸Šè¨˜ã§è¦‹ãŸã‚ˆã†ã«ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã‚’æŸç¸›ã™ã‚‹å ´åˆã‚‚ãã†ã§ã™ã—ã€ã‚¿ãƒ—ãƒ«ã‚„æ§‹é€ ä½“ã‚’æŸç¸›ã•ã›ã‚‹å ´åˆã‚‚å¿…ãšãƒãƒƒãƒã—ã¾ã™ã€‚

```rust
struct User {
    id: usize,
    name: &'static str
}

fn main() {
    let t = (1, "kento");

    let s = User { id: 1, name: "kento" };
}
```

ã¾ãŸã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¿ãƒ—ãƒ«ã‚„æ§‹é€ ä½“ã®å„å€¤ã‚’ã€å€‹åˆ¥ã®å¤‰æ•°ã«åˆ†å‰²ä»£å…¥ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼ˆThe bookã®æ—¥æœ¬èªç‰ˆã§ã¯[åˆ†é…ã¨è¨³ã•ã‚Œã¦ã„ã¾ã™](https://doc.rust-jp.rs/book-ja/ch18-03-pattern-syntax.html#:~:text=%E3%83%AA%E3%82%B9%E3%83%8818%2D13%3A%20%E6%A7%8B%E9%80%A0%E4%BD%93%E3%83%95%E3%82%A3%E3%83%BC%E3%83%AB%E3%83%89%E7%9C%81%E7%95%A5%E6%B3%95%E3%81%A7%E6%A7%8B%E9%80%A0%E4%BD%93%E3%81%AE%E3%83%95%E3%82%A3%E3%83%BC%E3%83%AB%E3%83%89%E3%82%92%E5%88%86%E9%85%8D%E3%81%99%E3%82%8B)ãŒã€ã“ã“ã§ã¯åˆ†å‰²ä»£å…¥ã¨ã—ã¾ã™ï¼‰ã€‚JavaScriptãªã©ã§ãŠãªã˜ã¿ã®æ§‹æ–‡ã§ã™ã­ã€‚

```rust
struct User {
    id: usize,
    name: &'static str
}

fn main() {
    let (t_id, t_name) = (1, "kento");

    let User {id: s_id, name: s_name } = User { id: 1, name: "kento" };
}
```

ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãŒä½¿ãˆã‚‹å ´æ‰€ã¯æ§˜ã€…ã‚ã‚Šã¾ã™ã€‚


## if-letæ§‹æ–‡

ã•ã¦ã€ã“ã‚Œã¾ã§ã¯`West`ã€`South`ã€`East`ã€`North`ã®ãã‚Œãã‚Œã«å€‹åˆ¥ã«ã©ã®ã‚ˆã†ãªæ–‡ã‚’å‡ºåŠ›ã™ã‚‹ã‹ã‚’æ˜ç¤ºã—ã¦ãã¾ã—ãŸã€‚ã“ã“ã§`North`ã®æ™‚ã ã‘ä½•ã‹ã‚’å‡¦ç†ã«ã—ã¦ã€ãã‚Œä»¥å¤–ã®æ™‚ã¯ä½•ã‚‚ã—ãªã„ã€ã¨ã„ã†çŠ¶æ³ã‚’è€ƒãˆãŸã„ã¨æ€ã„ã¾ã™ã€‚

`North`ã®æ™‚ã®å‡¦ç†ã‚’æ›¸ã„ã¦ã€ç¶šã‘ã¦`_`ã¨ã„ã†ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç”¨æ„ã—ã¾ã™ã€‚ã“ã‚Œã§`North`ä»¥å¤–ã®å…¨ã¦ã®åˆ—æŒ™å­ã€ã¨ã„ã†æ„å‘³ã«ãªã‚Šã¾ã™ã€‚`switch`æ–‡ã«ãŠã‘ã‚‹`default`ã®ã‚ˆã†ãªå½¹å‰²ã‚’æŒã¡ã¾ã™ã€‚

```rust
fn check_directon(direction: Direction) {
    match direction {
        Direction::North(distance) => {
            println!("åŒ—ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã‚€", distance);
            //=> åŒ—ã«10ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã‚€
        },
		_ => {}
        // Northä»¥å¤–ã¯ä½•ã‚‚ã—ãªã„
    }
}

fn main() {
	let direction = Direction::North(10);

	check_directon(direction);
}
```

ã“ã‚Œã§ã‚‚ã€Œ`North`ã®æ™‚ã ã‘ä½•ã‹ã—ãŸã„ã€ã¨ã„ã†ç›®çš„ã¯é”ã—ã¦ã„ã¾ã™ãŒã€ã¡ã‚‡ã£ã¨å†—é•·ã¨ã„ã†ã‹ã€`_ => {}`ã¨ã„ã†éƒ¨åˆ†ãŒã‚³ãƒ¼ãƒ‰ã®ç¾ã—ã•ã‚’æãªã£ã¦ã„ã‚‹æ°—ãŒã—ã¾ã™ã€‚

ã“ã†ã„ã†æ™‚ã¯`if-let`ã‚’ä½¿ç”¨ã—ã¾ã—ã‚‡ã†ã€‚ã²ã¨ã¾ãšæ§‹æ–‡ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```rust
fn main() {
	let direction = Direction::West(10);

	if let Direction::North(distance) = direction {
      println!("åŒ—ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã‚€", distance);
      // åŒ—ã«10ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã‚€
	}
}
```

å¤‰æ•°`direction`ãŒ`Direction::North(usize)`ã ã£ãŸå ´åˆã€`distance`ã«`10`ãŒæŸç¸›ã•ã‚Œã¾ã™ã€‚ãã‚Œä»¥å¤–ã¯ä½•ã‚‚èµ·ã“ã‚Šã¾ã›ã‚“ã€‚

å¤‰æ•°`distance`ã®ã‚¹ã‚³ãƒ¼ãƒ—ã¯`if-let`ã®ä¸­ã«ã¨ã©ã¾ã‚Šã¾ã™ã€‚`if-let`ã‚’æŠœã‘ãŸå…ˆã§ã¯åˆ©ç”¨ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ï¼ˆå¾Œè¿°ã™ã‚‹`let-else`ãªã‚‰å¯èƒ½ï¼‰ã€‚

```rust
fn main() {
    let direction = Direction::North(10);

    if let Direction::North(distance) = direction {
        // distanceãŒç”Ÿãã‚‹ã®ã¯ã“ã“ã‹ã‚‰
        println!("åŒ—ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã‚€", distance);
        // ã“ã“ã¾ã§
    }

    // ğŸ¦€âŒ ã‚¨ãƒ©ãƒ¼
    println!("{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã¿ã¾ã—ãŸ", distance);
    /*
        error[E0425]: cannot find value `distance` in this scope
        --> src/main.rs:17:29
            |
         17 |     println!("{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã¿ã¾ã—ãŸ", distance);
            |                                      ^^^^^^^^ not found in this scope
            |
    */
}
```

ä¾‹ãˆã°ã€`x = 5`ã¨ã„ã†ãƒ‘ã‚¿ãƒ¼ãƒ³ã§`if-let`æ§‹æ–‡ã‚’ä½¿ã†ã¨warningãŒå‡ºã¾ã™ã€‚warningæ–‡ã«ã‚‚`this pattern will always match`ã¨æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚è«–é§ä¸å¯èƒ½ã§ã‚ã‚Œã°`if-let`æ§‹æ–‡ã‚’ä½¿ã†æ„å‘³ãŒã‚ã‚Šã¾ã›ã‚“ã‹ã‚‰ã­ã€‚

```rust
fn main() {
    if let x = 10 {
    /*
        warning: irrefutable `if let` pattern
        --> src\main.rs:11:8
        |
     11 |     if let x = 10 {
        |        ^^^^^^^^^^
        |
        = note: this pattern will always match, so the `if let` is useless
        = help: consider replacing the `if let` with a `let`
        = note: `#[warn(irrefutable_let_patterns)]` on by default
    */
        println!("{}", x);
    }
}
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ


---

---

ã§ã¯ãƒãƒƒãƒã—ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹ã¨ã„ã†ã®ã¯ã©ã®ã‚ˆã†ãªå ´åˆã§ã—ã‚‡ã†ã‹ï¼Ÿã‚ºãƒãƒªã€ä»Šå›å‹‰å¼·ã—ã¦ã„ã‚‹åˆ—æŒ™å‹ãŒå½“ã¦ã¯ã¾ã‚Šã¾ã™ã€‚

`let x = 5;`ã«ãŠã‘ã‚‹`x`ã¯ã‚ã‚‰ã‚†ã‚‹ã‚‚ã®ã«ä¸€è‡´ã—å€¤ãŒæŸç¸›ã•ã‚Œã‚‹ãŸã‚ã€è«–é§ã§ãã¾ã›ã‚“ï¼ˆè«–é§ä¸å¯èƒ½ã ã¨ã„ãˆã‚‹ï¼‰ã€‚

`let x = `

ã¤ã¾ã‚Šã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¯è«–é§å¯èƒ½ï¼ˆæŸç¸›ã§ããªã„å¯èƒ½æ€§ãŒã‚ã‚‹ï¼‰ãªã‚‚ã®ã¨è«–é§ä¸å¯èƒ½ï¼ˆæŸç¸›ã§ããªã„å¯èƒ½æ€§ãŒãªã„ï¼‰ãªã‚‚ã®ãŒã‚ã‚‹ã¨è¨€ãˆã¾ã™ã€‚

ãã—ã¦è«–é§å¯èƒ½ãªã‚‚ã®ã«é–¢ã—ã¦ã¯ã€matchå¼ã‚’ç”¨ã„ã¦å…¨ã¦ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç¶²ç¾…ã—ã¦ã„ã‚‹ã‚ã‘ã§ã™ã€‚

```rust
fn main() {
    let direction = Direction::North(999);

    match direction {
        Direction::West(distance) => println!("åŒ—ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã¿ã¾ã™", distance),
        Direction::Sorth(distance) => println!("åŒ—ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã¿ã¾ã™", distance),
        Direction::East(distance) => println!("åŒ—ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã¿ã¾ã™", distance),
        // ğŸ¦€ Nort(999)ã«ãƒãƒƒãƒã™ã‚‹æ™‚
        Direction::North(999) => println!("999ãƒ¡ãƒ¼ãƒˆãƒ«ã‚‚é€²ã‚“ã ã‹ã‚‰å´–ã‹ã‚‰è½ã¡ã¡ã‚ƒã„ã¾ã—ãŸ"),
        Direction::North(distance) => println!("åŒ—ã«{}ãƒ¡ãƒ¼ãƒˆãƒ«é€²ã¿ã¾ã™", distance),
    }
    //=> 999ãƒ¡ãƒ¼ãƒˆãƒ«ã‚‚é€²ã‚“ã ã‹ã‚‰å´–ã‹ã‚‰è½ã¡ã¡ã‚ƒã„ã¾ã—ãŸ"
}
```

éå¸¸ã«è¡¨ç¾åŠ›ãŒé«˜ã„ã§ã™ã­ã€‚

---

ã§ã€ã‚„ã£ã¨`if-let`æ§‹æ–‡ã«æˆ»ã£ã¦ãã¾ã™ã€‚

åˆ—æŒ™ä½“ã®ä»–ã«è«–é§å¯èƒ½ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã«é–¢ã—ã¦ã¯ã€rangeå‹ãŒæŒ™ã’ã‚‰ã‚Œã¾ã™ã€‚ä»¥ä¸‹ã®ä¾‹ã§ã„ã†ã¨ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯`1..=10`ã€ã¤ã¾ã‚Š1ã‹ã‚‰10ã¾ã§ã®æ•°å€¤ã§ã™ãŒã€å½“ç„¶ãã®ç¯„å›²å¤–ã®æ•°å€¤ãŒå…¥ã£ã¦ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚è«–é§å¯èƒ½ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚

```rust
fn main() {
    let num = 10;

    if let 1..=10 = num {
        println!("1ã‹ã‚‰10ã®é–“ã§ã™");
        /* ä½•ã‚‰ã‹ã®å‡¦ç†ã‚’ã™ã‚‹ */
    }
}
```

## `let-else`

ã†ãƒ¼ã‚“ã“ã‚Œã¯è„³æ±ã§ã¾ã™ã­ã€‚

## å‚è€ƒ

[ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒä½¿ç”¨ã•ã‚Œã‚‹ã“ã¨ã®ã‚ã‚‹ç®‡æ‰€å…¨éƒ¨ - The Rust Programming Language æ—¥æœ¬èªç‰ˆ](https://doc.rust-jp.rs/book-ja/ch18-01-all-the-places-for-patterns.html)

[Rustã®ã€Œif letã€ã¨ã¯ä½•ãªã®ã‹ï¼Ÿ - Qiita](https://qiita.com/plotter/items/0d8dc2782f21178d64f1)

[Rust Enum (With Examples)](https://www.programiz.com/rust/enum)

[Idein Ideas &#8212; Rustã«ãŠã‘ã‚‹irrefutable patternã‚’ä½¿ã£ãŸã‚¤ãƒ‡ã‚£ã‚ªãƒ ](https://blog.idein.jp/post/644161837029605376/rust%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8Birrefutable-pattern%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%82%A4%E3%83%87%E3%82%A3%E3%82%AA%E3%83%A0)

[å…¨ãƒ—ãƒ­ã‚°ãƒ©ãƒã«æ§ãï¼å›³è§£ã€Œãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã€ - Qiita](https://qiita.com/hinastory/items/87431aa48197cc4d7d84)

[Rustã®if let Someã«ã¤ã„ã¦èª¿ã¹ãŸè©±ã€‚ | ã¬ã®éƒ¨å±‹ï¼ˆä»®ï¼‰](https://suzulang.com/rust-if-let-some/)

[Rust - åé§å¯èƒ½æ€§: ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒä¸€è‡´ã—ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹ã‹ã©ã†ã‹](https://runebook.dev/ja/docs/rust/book/ch18-02-refutability)

https://maku77.github.io/p/ffqyajs/